(()=>{"use strict";var s;!function(s){s[s.LEFT=0]="LEFT",s[s.RIGHT=1]="RIGHT"}(s||(s={}));class t{constructor(t,e,i){this.balloonImgWidth=50,this.balloonImgHeight=80,this.balloonSpeed=7,this.balloonLerpValue=.7,this.Direction=s,this.instance=t,this.pos=this.instance.createVector(e-this.balloonImgWidth/2,i)}moveRight(){this.checkConstrain(this.pos.x,s.RIGHT)||(this.pos.x=this.instance.lerp(this.pos.x,this.pos.x+this.balloonSpeed,this.balloonLerpValue))}moveLeft(){this.checkConstrain(this.pos.x,s.LEFT)||(this.pos.x=this.instance.lerp(this.pos.x,this.pos.x-this.balloonSpeed,this.balloonLerpValue))}show(s){this.instance.noFill(),this.instance.strokeWeight(4),this.instance.image(s,this.pos.x,this.pos.y,this.balloonImgWidth,this.balloonImgHeight)}checkConstrain(t,e){return e===s.RIGHT&&t+this.balloonSpeed>this.instance.width-this.balloonImgWidth||e===s.LEFT&&t-this.balloonSpeed<0}}class e{constructor(s,t,e,i){this.coinSpeed=4,this.instance=s,this.spawnPos=this.instance.createVector(t,e),this.size=i}update(){this.spawnPos.y+=this.coinSpeed}show(s){this.instance.image(s,this.spawnPos.x,this.spawnPos.y,this.size,this.size)}offScreen(){return this.spawnPos.y>this.instance.height}hit(s){return this.instance.collideRectRect(this.spawnPos.x,this.spawnPos.y,this.size,this.size,s.pos.x,s.pos.y,s.balloonImgWidth,s.balloonImgHeight)}}class i{constructor(s){this.spawnYOffset=-10,this.spikeSpeed=4,this.spikeImgHeight=8,this.spikeMinLength=100,this.instance=s,this.spikeMaxLength=this.instance.width/2,this.spawnPos=this.instance.createVector(this.instance.random(0,this.spikeMaxLength),this.spawnYOffset),this.spikeImgWidth=this.getLength()}update(){this.spawnPos.y+=this.spikeSpeed}show(s){this.instance.image(s,this.spawnPos.x,this.spawnPos.y,this.spikeImgWidth,this.spikeImgHeight)}getLength(){return this.instance.random(this.spikeMinLength,this.spikeMaxLength)}offScreen(){return this.spawnPos.y>this.instance.height}hit(s){return this.instance.collideRectRect(this.spawnPos.x,this.spawnPos.y,this.spikeImgWidth,this.spikeImgHeight,s.pos.x,s.pos.y,s.balloonImgWidth,s.balloonImgHeight)}}class n{constructor(s){this.score=0,this.instance=s}showGameOver(){this.instance.fill(255),this.instance.textSize(32);let s=`High Score = ${localStorage.getItem("HighScore")}`,t=`Socre = ${this.score}`;this.instance.text("Game over",this.instance.width-300,this.instance.width/2),this.instance.text(s,this.instance.width-300,this.instance.width/2+40),this.instance.text(t,this.instance.width-300,this.instance.width/2+75)}show(){this.instance.fill(255),this.instance.textSize(20);let s=`Score ${this.score}`;this.instance.text(s,10,25)}}localStorage.setItem("HighScore","0"),new p5((s=>{s.preload=()=>{s.balloonImg=s.loadImage("./assets/Balloon.png"),s.coinImg=s.loadImage("./assets/Coin.png"),s.spikeImg=s.loadImage("./assets/Spike.png")},s.setup=()=>{s.createCanvas(400,500),s.sore=0,s.spikes=[],s.coins=[],s.balloon=new t(s,s.width/2,s.height/2),s.scoreSystem=new n(s)},s.draw=()=>{s.background(51),s.frameCount%50==0&&s.spikes.push(new i(s)),s.frameCount%50==0&&s.generate_random_coin(5,18);for(let t=s.spikes.length-1;t>=0;t--)s.spikes[t].show(s.spikeImg),s.spikes[t].update(),s.spikes[t].offScreen()&&s.spikes.splice(t,1),s.spikes[t].hit(s.balloon)&&(s.scoreSystem.score>parseInt(localStorage.getItem("HighScore"))&&localStorage.setItem("HighScore",JSON.stringify(s.scoreSystem.score)),s.scoreSystem.showGameOver(),s.noLoop());for(let t=s.coins.length-1;t>=0;t--)s.coins[t].show(s.coinImg),s.coins[t].update(),s.coins[t].offScreen()&&s.coins.splice(t,1),s.coins[t].hit(s.balloon)&&(s.scoreSystem.score++,s.coins.splice(t,1));s.balloon.show(s.balloonImg),s.scoreSystem.show(),s.playerControl()},s.generate_random_coin=(t,i)=>{for(let n=0;n<t;n++){let t=i,o={x:s.random(i,s.width-i),y:s.random(-150,0),r:t},h=!1;for(let t=0;t<s.coins.length;t++){let e=s.coins[t];if(s.dist(o.x,o.y,e.spawnPos.x,e.spawnPos.y)<e.size+o.r+5){n--,h=!0;break}}h||s.coins.push(new e(s,o.x,o.y,o.r))}},s.playerControl=()=>{s.keyIsDown(s.LEFT_ARROW)&&s.balloon.moveLeft(),s.keyIsDown(s.RIGHT_ARROW)&&s.balloon.moveRight()}}))})();